# æœ¬åœ°ä¼˜å…ˆ Â· Tauri æ›¿ä»£ Electron è®¡åˆ’

> ç”¨ Tauri + Rust æ‰“é€ ä¸€ç»„å¸¸ç”¨å°å·¥å…·ï¼Œä½“ç§¯æ›´å°ã€å ç”¨æ›´ä½ã€å®Œå…¨æœ¬åœ°å¯ç”¨ï¼›æ²‰æ·€å¯å¤ç”¨çš„å¤šåº”ç”¨åº•åº§ã€‚

- æ–‡æ¡£ï¼šå‚è§ [è·¯çº¿å›¾ï¼ˆRoadmapï¼‰](./docs/ROADMAP.md)

## çŠ¶æ€æ ‡è¯†
- ğŸ”œ è®¡åˆ’
- ğŸš§ å¼€å‘ä¸­
- âœ… å¯ç”¨
- â¸ï¸ æš‚åœï¼ˆå¯é€‰ï¼‰

## å½“å‰èšç„¦
- å‰ªè´´æ¿ç®¡å®¶ ğŸš§
- Hosts ç®¡ç†å™¨ ğŸš§
- å€™é€‰æ’é˜Ÿï¼šæœ¬åœ°ç¬”è®°ã€å›¾ç‰‡æ‰¹é‡å‹ç¼©

## åº”ç”¨æ¸…å•ä¸è¿›åº¦
- å‰ªè´´æ¿ç®¡å®¶ï¼ˆå†å²/å»é‡/æ¨¡ç³Šæœç´¢/å…¨å±€å¿«æ·é”®/æ‰˜ç›˜ï¼‰ ğŸš§
  - [ ] æ‰˜ç›˜ä¸å…¨å±€å¿«æ·é”®
  - [ ] æ–‡æœ¬/å›¾ç‰‡è®°å½•ä¸æœ¬åœ°æŒä¹…åŒ–ï¼ˆSQLiteï¼‰
  - [ ] æœç´¢ã€å»é‡ã€ç²˜è´´å¢å¼º
  - [ ] è®¾ç½®é¡µä¸æ•°æ®å¯¼å‡º
- æœ¬åœ°ç¬”è®°ï¼ˆMarkdown + åŒé“¾/æ ‡ç­¾ + FTS5 æœç´¢ï¼‰ ğŸ”œ
  - [ ] ç¬”è®°åº“ä¸é™„ä»¶ç›®å½•
  - [ ] Markdown ç¼–è¾‘ä¸é¢„è§ˆ
  - [ ] FTS5 æœç´¢ä¸åå‘é“¾æ¥
  - [ ] å¯¼å…¥/å¯¼å‡º
- å›¾ç‰‡æ‰¹é‡å‹ç¼©/è½¬æ¢ï¼ˆPNG/JPEG/WebPï¼‰ ğŸ”œ
  - [ ] æ‹–æ”¾æ‰¹å¤„ç†
  - [ ] å¹¶å‘ä»»åŠ¡é˜Ÿåˆ—
  - [ ] è´¨é‡é¢„è®¾ä¸é¢„è§ˆ
  - [ ] å…ƒæ•°æ®å¤„ç†ï¼ˆEXIF å¯é€‰ä¿ç•™ï¼‰
- æˆªå›¾ä¸ç¦»çº¿ OCRï¼ˆTesseractï¼‰ ğŸ”œ
  - [ ] åŒºåŸŸæˆªå›¾
  - [ ] æœ¬åœ° OCR
  - [ ] ä¸€é”®å¤åˆ¶/ä¿å­˜
- PDF å·¥å…·ç®±ï¼ˆåˆå¹¶/æ‹†åˆ†/æå–/å‹ç¼©ï¼‰ ğŸ”œ
- JSON/CSV å·¥å…·ç®±ï¼ˆæ ¡éªŒ/æ ¼å¼åŒ–/è½¬æ¢/å¤§æ–‡ä»¶ï¼‰ ğŸ”œ
- Hosts ç®¡ç†å™¨ï¼ˆåˆ†ç»„åˆ‡æ¢/è§„åˆ™å¯ç”¨ã€å¤‡ä»½/è¿˜åŸï¼‰ ğŸš§
  - [x] è§„åˆ™å¯ç”¨/åœç”¨
  - [ ] åˆ†ç»„åˆ‡æ¢
  - [ ] å¤‡ä»½/è¿˜åŸ
  - [ ] é¢„è§ˆä¸å†²çªæ£€æµ‹ï¼ˆé«˜ï¼‰
  - [ ] å†å²ç‰ˆæœ¬/å›æ»šï¼ˆå¸¦å·®å¼‚å¯¹æ¯”ï¼‰ï¼ˆé«˜ï¼‰
  - [ ] åˆ·æ–° DNSï¼ˆå¯é€‰ï¼Œéœ€ç®¡ç†å‘˜æƒé™ï¼‰
  - [ ] å¯¼å…¥/å¯¼å‡º
- å¿«é€Ÿå¯åŠ¨å™¨ï¼ˆå…¨å±€æœç´¢/å‘½ä»¤/å·¥ä½œæµã€å¯æ‰©å±•æ’ä»¶ï¼‰ ğŸ”œ
- è½»é‡ API å®¢æˆ·ç«¯ï¼ˆç¯å¢ƒ/è„šæœ¬/å†å²/æœ¬åœ°åŠ å¯†ï¼‰ ğŸ”œ
- ç•ªèŒ„é’Ÿ + æ—¶é—´è¿½è¸ªï¼ˆæ‰˜ç›˜/ç»Ÿè®¡/å¯¼å‡ºï¼‰ ğŸ”œ

## å·¥ç¨‹ä¸åº•åº§ï¼ˆç®€è¦ï¼‰
- æŠ€æœ¯æ ˆï¼šTauri v2 Â· Rust Â· React + Radix UI Â· SQLiteï¼ˆFTS5ï¼‰ã€‚
- å¸¸ç”¨èƒ½åŠ›ï¼šFS/Path/Dialog/HTTP/Store/Tray/Global Shortcut/Window State/Autostart/Updaterã€‚
- å¤ç”¨å½¢æ€ï¼šå•ä»“å¤šåº”ç”¨ï¼ˆpnpm workspace + Cargo workspaceï¼‰ï¼Œå…±äº« UI ç»„ä»¶ä¸ Rust å·¥å…·åº“ã€‚
- å®‰å…¨ä¸ä½“ç§¯ï¼šæœ¬åœ°èµ„æºã€å‘½ä»¤ç™½åå•ã€æœ€å°æƒé™ã€æ‡’åŠ è½½ã€ä¾§è½¦æŒ‰éœ€å¯ç”¨ã€‚
- è´¨é‡ä¸å‘å¸ƒï¼šTypeScript/Rust å…¨é‡ç±»å‹ï¼›ESLint/Prettier/Clippyï¼›Changesetsï¼›CI ä¸‰å¹³å°æ„å»ºã€‚

### ä¾èµ–é€‰å‹è¯´æ˜ï¼ˆæœ€å°è¶³è¿¹åˆè§„ï¼‰

ä»…åˆ—å‡ºéœ€æ¶æ„çº§ç†ç”±çš„æ ¸å¿ƒåº•åº§ä¾èµ–ï¼š

| ä¾èµ– | ç”¨é€” | é€‰æ‹©ç†ç”± | æ‹’ç»çš„æ›¿ä»£æ–¹æ¡ˆ | å®ªç« ä¸€è‡´æ€§ |
| ---- | ---- | -------- | -------------- | ---------- |
| `rusqlite` (bundled) | æŒä¹…åŒ–ï¼ˆå†å²/é…ç½®/åç»­ FTS5ï¼‰ | å•æ–‡ä»¶åµŒå…¥å¼ DBï¼Œé›¶å®ˆæŠ¤è¿›ç¨‹ï¼›æˆç†Ÿç¨³å®šï¼›å¯ç”¨ `bundled` ä¾¿äºå¯ç§»æ¤æ„å»º | `sled`ï¼ˆç¼ºå°‘æˆç†Ÿ SQL/FTSï¼‰ã€å¤–éƒ¨ PostgreSQLï¼ˆå¢åŠ éƒ¨ç½²å¤æ‚åº¦ï¼‰ | Localâ€‘First / æœ€å°è¿ç»´ |
| `blake3` | æ„å›¾ç­¾åå“ˆå¸Œï¼ˆå½’ä¸€åŒ–åï¼‰ | æé«˜åå + å¯å¹¶è¡Œï¼›å®ç°ä½“ç§¯å°ï¼›æ¯” SHA256 æ›´å¿«ä¸”è¶³å¤Ÿä½ç¢°æ’ | `sha2`ï¼ˆè¾ƒæ…¢ï¼Œè¶…å‡ºéœ€æ±‚ï¼‰ï¼Œè‡ªå®šä¹‰ murmur/fnvï¼ˆç¢°æ’ç‡/å®ç°è´Ÿæ‹…ï¼‰ | æ€§èƒ½ / æœ€å°ä¾èµ– |

è®¾è®¡çº¦æŸï¼š
- ä¸å¼•å…¥é™¤æ ‡å‡†åº“ + ä¸Šè¿°å¿…è¦ crates å¤–çš„é‡å‹è¿è¡Œæ—¶æˆ–æœåŠ¡è¿›ç¨‹ã€‚
- è‹¥åç»­éœ€è¦å…¨æ–‡æ£€ç´¢ï¼Œå°†å¤ç”¨åŒä¸€ SQLite (FTS5) è€Œéæ–°å¢æœç´¢åç«¯ã€‚
- å“ˆå¸Œç”¨é€”ä¸ºæœ¬åœ°ç¼“å­˜é”®ï¼ˆéå®‰å…¨æ•æ„Ÿï¼‰ï¼Œ`blake3` å·²æ»¡è¶³é€Ÿåº¦ä¸å¯é æ€§ï¼Œæ— éœ€æ›´é‡åŠ å¯†å¥—ä»¶ã€‚

å˜æ›´è¯„ä¼°ç­–ç•¥ï¼šå½“å‡ºç° (a) è§£æ/å†å² å†™å…¥æ€§èƒ½ç“¶é¢ˆ æˆ– (b) å“ˆå¸Œç¢°æ’ç‡è§‚æµ‹ > 0.1% æ—¶å†è¯„ä¼°æ›¿ä»£æ–¹æ¡ˆã€‚


### åº”ç”¨å‘ç°ä¸æè¿° (Descriptor)

æ¯ä¸ªå¯è¢« Launcher å‘ç°çš„åº”ç”¨éœ€æä¾› `tlfsuite.json`ï¼Œæ”¾ç½®ä½ç½®ï¼ˆæŒ‰ä¼˜å…ˆåŒ¹é…é¡ºåºï¼‰ï¼š

1. `<appRoot>/tlfsuite.json`
2. `<appRoot>/Contents/Resources/tlfsuite.json` (macOS .app bundle)
3. `<appRoot>/resources/tlfsuite.json`
4. `<appRoot>/share/tlfsuite/tlfsuite.json`

æ‰“åŒ…ï¼ˆTauriï¼‰æ—¶åœ¨ `tauri.conf.json` çš„ `bundle.resources` ä¸­åŒ…å«ï¼š

```jsonc
{
  "bundle": { "resources": ["tlfsuite.json"] }
}
```

`tlfsuite.json` ç¤ºä¾‹ï¼š

```jsonc
{
  "id": "hosts",
  "name": "Hosts Manager",
  "description": "Manage /etc/hosts rules",
  "scheme": "hostsmanager", // å¯é€‰ï¼Œæä¾›åˆ™ deep link ç”¨ <scheme>://open
  "actions": [
    { "name": "open", "title": "Open" },
    { "name": "rule", "title": "Open Rule", "args": [{ "name": "id", "type": "string", "required": true }] }
  ],
  "icon": "icon.png" // å¯ä¸º data:URL / ç›¸å¯¹è·¯å¾„ / (Linux) å›¾æ ‡åç§°
}
```

### Deep Link æ„é€ 

ä¼˜å…ˆä½¿ç”¨åº”ç”¨è‡ªå®šä¹‰ schemeï¼š

```
<scheme>://open?args=<urlencoded>
```

å¦åˆ™å›é€€ç»Ÿä¸€å…¥å£ï¼š

```
tlfsuite://open?app=<id>&args=<urlencoded>
```

## åŸåˆ™
- æœ¬åœ°ä¼˜å…ˆã€é»˜è®¤å¯ç¦»çº¿
- é›¶é…ç½®å³ç”¨ã€æŒ‰éœ€å¯ç”¨
- å°ä½“ç§¯ã€ä½å ç”¨ã€å¯ç»´æŠ¤

## å‚ä¸ä¸åé¦ˆ
- æ¬¢è¿é€šè¿‡ Issue/Discussion æéœ€æ±‚æˆ–æŠ•ç¥¨å†³å®šä¼˜å…ˆçº§ã€‚
- æ ‡è®°ä¸º `good first issue` çš„ä»»åŠ¡é€‚åˆé¦–æ¬¡è´¡çŒ®ã€‚
- ä¸è®¾å…·ä½“æ—¥æœŸï¼ŒæŒ‰ä¸Šæ–¹â€œçŠ¶æ€æ ‡è¯†â€æ¨è¿›å„åº”ç”¨é˜¶æ®µã€‚
