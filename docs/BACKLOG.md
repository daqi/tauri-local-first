# Backlog · Descriptor & Invocation 后续特性

> 来源：规格 `specs/001-tauri-rust-mcp/spec.md` 中非 MVP FR
> 状态：MVP 范围锁定后延后考虑；进入实施需评审优先级与影响面。

## 列表概览
| FR | 类型 | 摘要 | 价值 | 初步复杂度 | 备注 |
|----|------|------|------|------------|------|
| FR-009 | 性能/稳健 | 重复快速调用防抖/幂等策略 | 降低资源浪费 & 竞态 | M | 需统计调用窗口大小 |
| FR-014 | UI/资源 | 多图标来源（格式识别/缓存） | 更佳展示一致性 | M | 可能需图片解码缓存层 |
| FR-015 | 观测/安全 | 更细粒度日志隐私控制 | 合规 & 隐私 | S | 分类：debug/info/audit |
| FR-017 | UX | Action UI 元数据（args 描述） | 命令面板可用性 | S | 需扩展 schema（向后兼容） |
| FR-019 | 架构 | 插件扩展治理（卸载/禁用） | 动态组合/可维护 | L | 需状态持久化 + UI 支持 |
| FR-020 | 冲突处理 | 高级冲突策略（选择优先级） | 自定义化 | M | 方案：优先级字段 or 策略文件 |
| FR-021 | 性能 | Descriptor 持久化缓存 | 启动加速 | M | hash/mtime 结合；需失效策略 |
| FR-022 | 安全 | 权限最小化声明与校验 | 风险管理 | L | 需统一权限模型 & 审计点 |
| FR-025 | 扩展 | 分类 / 权限 / engines / tags | 丰富索引与兼容控制 | M | Schema 增量演进 |

## 详细说明
### FR-009 重复快速调用防抖
- 场景：用户或脚本 100ms 内多次触发同一 action。
- 方向：调用键 (appId+actionName+参数签名) 进入短期窗口缓存；重复 → 返回上次结果或 QUEUED。
- 风险：可能误伤需要快速连续执行的动作（需白名单）。

### FR-014 多图标来源增强
- 支持：SVG / PNG / data URL / 主题化（浅/深）。
- 方向：`icon` 字段允许对象形式：`{"default":"icon.png","dark":"icon-dark.png"}`。

### FR-015 日志隐私分级
- 分级：debug(开发) / info(操作) / audit(敏感) / error(异常)。
- 方向：提供日志级别配置 & 审计导出。

### FR-017 Action UI Metadata
- 增强：参数可添加 `label`, `placeholder`, `description`。
- 兼容：均为可选字段；旧版本忽略不报错。

### FR-019 插件治理
- 功能：禁用某 app（不扫描 or 扫描后不展示）；卸载记录；来源追踪。
- 需求：配置文件 `registry.overrides.json`。

### FR-020 高级冲突策略
- 方案：新增字段 `priority`（数值越高优先）或 `namespace` 隔离。
- 决策：首次冲突时生成提示事件。

### FR-021 Descriptor 缓存
- 缓存内容：解析后结构 + hash。
- 刷新策略：mtime 或 hash 变化触发；冷启动加载缓存再异步刷新。

### FR-022 权限模型
- 方向：permissions[] 描述应用声明能力（如 fs.read / network.dns）。
- 后续：Launcher 可在首次调用前展示核准确认。

### FR-025 分类 / 权限 / engines / tags 扩展
- 搜索/过滤/兼容策略增强。
- engines 用于 Launcher 最低版本要求。

## 排序建议（下一轮迭代顺序）
1. FR-021 (启动体验提升)
2. FR-009 (避免重复开销)
3. FR-017 (提高可发现性与交互质量)
4. FR-020 (冲突可控化)
5. FR-014 (视觉一致)
6. FR-015 (日志治理)
7. FR-022 (安全基线)
8. FR-025 (扩展生态)
9. FR-019 (体系化插件治理)

## 指标草案
| 目标 | 指标 | 说明 |
|------|------|------|
| 缓存命中 | cache_hit_rate > 0.85 | 冷启动 5 次平均 |
| 幂等策略有效 | duplicate_drop_rate | 重复调用被丢弃比例 |
| 权限提示转化 | permission_accept_rate | 首次调用弹窗接受率 |

---
后续新增需求：请在顶部插入新行并保持表格按 FR 编号升序。
